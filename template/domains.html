{{define "title"}}Domain rating{{end}}
{{define "head"}}{{end}}
{{define "content"}}
<table style="width:100%">
    <tr>
        <th></th>
        <th>Domain</th>
        <th>Rating</th>
    </tr>
    {{range .Domains}}
    <tr>
        <td><input type="checkbox" name="{{.ID}}"></td>
        <td>{{.URL}}</td>
        <td>{{.Rating}}</td>
    </tr>
    {{end}}
</table>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
    Create new list
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Enter Title name</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control" id="name" placeholder="Enter list name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" id="create_new_list" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>

{{end}}
{{define "foot"}}
<script>
    $("#create_new_list").on("click", function () {
		var checked_checkboxes = $( "input:checked" );
		var ids = []

		for (var i = 0; i < checked_checkboxes.length; i++) {
			ids.push(checked_checkboxes[i].getAttribute("name"))
		}
        
        var name = $("#name").val();

        if (name == "") {
            $("#name").addClass("is-invalid");
        } else {
            $("#name").removeClass("is-invalid");
        }

        var output = {
            ids: ids,
            name: name
        };

		$.post("/lists", output, function(data) {
			if (data != "") 
				alert(data);
			location.reload();

		});
    })
</script>
{{end}}